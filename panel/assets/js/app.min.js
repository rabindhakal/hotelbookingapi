const toast=swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3});function login(e){$.ajax({type:"POST",url:"./api/Login.php",data:e,beforeSend:()=>{$("#overlay").fadeIn()},success:e=>{$("#overlay").fadeOut();let t=JSON.parse(e),o=t.error,r=t.msg;if(1==o)return console.error("Error",r),void toast({type:"warning",text:r});if(0==o){let e=t.token;localStorage.setItem("token-fod-login",e),toast({type:"success",text:r}),setTimeout(()=>{window.location.href="?view=home"},1e3)}}})}function resetPassword(e){$.ajax({type:"POST",url:"./api/Reset.php",data:e,beforeSend:()=>{$("#overlay").fadeIn()},success:e=>{$("#overlay").fadeOut();let t=JSON.parse(e),o=t.error,r=t.msg;if(1==o)return console.error("Error",r),void toast({type:"warning",text:r});if(0==o){let e=t.email,o=t.uid,s="ZERG"+o;toast({type:"success",text:r}),setTimeout(()=>{window.location.href="?view=newpassword&uid="+o+"&email="+e+"&session_TOKEN="+s},1e3)}}})}function newPassword(e){$.ajax({type:"POST",data:e,url:"./api/NewPassword.php",beforeSend:()=>{$("#overlay").fadeIn()},success:e=>{$("#overlay").fadeOut();let t=JSON.parse(e),o=t.error,r=t.msg;if(1==o)return console.error("Error",r),void toast({type:"warning",text:r});0==o&&(toast({type:"success",text:r}),setTimeout(()=>{window.location.href="./"},1e3))}})}$("#mapPin").on("keypress keyup blur",function(e){e.preventDefault()}),$(".only-number").on("keypress keyup blur",function(e){$(this).val($(this).val().replace(/[^\d].+/,"")),(e.which<48||e.which>57)&&e.preventDefault()}),$(document).ready(()=>{console.log("App Js started"),$("#login-form").on("submit",e=>{e.preventDefault(),login($("#login-form").serialize())}),$("#reset-form").on("submit",e=>{e.preventDefault(),resetPassword($("#reset-form").serialize())}),$("#newpassword").on("submit",e=>{e.preventDefault();var t=$("#newpassword").serialize();console.log("Data",t),newPassword(t)})});